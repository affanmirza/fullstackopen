{"ast":null,"code":"var _jsxFileName = \"D:\\\\fullstackopen\\\\part2\\\\phonebook\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport personService from './services/persons';\nimport Filter from './components/Filter';\nimport Notification from './components/Notification';\nimport PersonsForm from './components/PersonsForm';\nimport Persons from './components/Persons';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setNewFilter] = useState('');\n  const [popup, setPopup] = useState(null);\n\n  const handleNameChange = event => setNewName(event.target.value);\n\n  const handleNumberChange = event => setNewNumber(event.target.value);\n\n  const handleFilterChange = event => setNewFilter(event.target.value);\n\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const addPerson = event => {\n    event.preventDefault();\n\n    if (newName === '' || newNumber === '') {\n      alert(\"Name or number cannot be blank\");\n    } else {\n      //In this case, a name is also unique since duplicate addition is prevented and replaced with updating number\n      const person = persons.find(v => v.name.toLowerCase() === newName.toLowerCase());\n\n      if (person) {\n        if (window.confirm(`${person.name} is already added to phonebook, replace the old number with a new one?`)) {\n          //console.log(person)\n          const changedNumber = { ...person,\n            number: newNumber\n          };\n          personService.update(person.id, changedNumber).then(returnedPerson => {\n            setPersons(persons.map(element => element.id !== person.id ? element : returnedPerson));\n            setPopup({\n              message: `Updated ${person.name}`,\n              status: 'success'\n            });\n            setTimeout(() => {\n              setPopup(null);\n            }, 3000);\n            setNewName('');\n            setNewNumber('');\n          }).catch(error => {\n            setPopup({\n              message: `Information of ${person.name} has already been removed from the server `,\n              status: 'error'\n            });\n            setTimeout(() => {\n              setPopup(null);\n            }, 3000);\n            setPersons(persons.filter(item => item.id !== person.id));\n            setNewName('');\n            setNewNumber('');\n          });\n        }\n      } else {\n        const personObject = {\n          name: newName,\n          number: newNumber\n        };\n        personService.create(personObject).then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson));\n          setPopup({\n            message: `Added ${returnedPerson.name}`,\n            status: 'success'\n          });\n          setTimeout(() => {\n            setPopup(null);\n          }, 1000000);\n          setNewName('');\n          setNewNumber('');\n        });\n      }\n    }\n  };\n\n  const deletePerson = id => {\n    const person = persons.find(n => n.id === id);\n\n    if (window.confirm(`delete ${person.name} ?`)) {\n      personService.erase(id).then(() => {\n        setPersons(persons.filter(item => item.id !== person.id));\n      });\n    }\n  };\n\n  const personsFiltered = newFilter === '' ? persons : persons.filter(v => v.name.toLowerCase().includes(newFilter.toLowerCase()) //toLowerCase() is used to handle\n  ); // insensitive case problems by lowercasing both the 'name' property and the user's input\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Notification, {\n      popup: popup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      text: 'filter shown with',\n      value: newFilter,\n      onChange: handleFilterChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonsForm, {\n      onSubmit: addPerson,\n      valueName: newName,\n      onChangeName: handleNameChange,\n      valueNumber: newNumber,\n      onChangeNumber: handleNumberChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      array: personsFiltered,\n      onClick: deletePerson\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n\nexport default App;","map":{"version":3,"sources":["D:/fullstackopen/part2/phonebook/src/App.js"],"names":["React","useState","useEffect","personService","Filter","Notification","PersonsForm","Persons","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","popup","setPopup","handleNameChange","event","target","value","handleNumberChange","handleFilterChange","getAll","then","initialPersons","addPerson","preventDefault","alert","person","find","v","name","toLowerCase","window","confirm","changedNumber","number","update","id","returnedPerson","map","element","message","status","setTimeout","catch","error","filter","item","personObject","create","concat","deletePerson","n","erase","personsFiltered","includes"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Filter from './components/Filter'\nimport Notification from './components/Notification'\nimport PersonsForm from './components/PersonsForm'\nimport Persons from './components/Persons'\nimport './App.css'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ newFilter, setNewFilter] = useState('')\n  const [ popup, setPopup ] = useState(null)\n  const handleNameChange = event => setNewName(event.target.value)\n  const handleNumberChange = event => setNewNumber(event.target.value)\n  const handleFilterChange = event => setNewFilter(event.target.value)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const addPerson = event => {\n    event.preventDefault()\n    if (newName === '' || newNumber === '') {\n      alert(\"Name or number cannot be blank\")\n    }\n    else { //In this case, a name is also unique since duplicate addition is prevented and replaced with updating number\n      const person = persons.find(v => v.name.toLowerCase() === newName.toLowerCase())\n      if (person) {\n        if (window.confirm(`${person.name} is already added to phonebook, replace the old number with a new one?`)) {\n          //console.log(person)\n          const changedNumber = {...person, number: newNumber}\n  \n          personService\n          .update(person.id, changedNumber)\n          .then(returnedPerson => {\n            setPersons(persons.map(element => element.id !== person.id ? element : returnedPerson))\n            setPopup({\n              message: `Updated ${person.name}`,\n              status: 'success'\n            })\n            setTimeout(() => {setPopup(null)}, 3000)\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            setPopup({\n              message: `Information of ${person.name} has already been removed from the server `,\n              status: 'error'\n            })\n            setTimeout(() => {setPopup(null)}, 3000)\n            setPersons(persons.filter(item => item.id !== person.id))\n            setNewName('')\n            setNewNumber('')\n          })\n        }\n      }\n      else {\n        const personObject = {\n          name: newName,\n          number: newNumber\n        }\n  \n        personService\n          .create(personObject)\n          .then(returnedPerson => {\n            setPersons(persons.concat(returnedPerson))\n            setPopup({\n              message: `Added ${returnedPerson.name}`,\n              status: 'success'\n            })\n            setTimeout(() => {setPopup(null)}, 1000000)\n            setNewName('')\n            setNewNumber('')\n          })\n      }\n    }\n  }\n\n  const deletePerson = id => {\n    const person = persons.find(n => n.id === id)\n\n    if (window.confirm(`delete ${person.name} ?`)) {\n      personService\n      .erase(id)\n      .then(() => {\n        setPersons(persons.filter(item => item.id !== person.id))\n      })\n    }\n  }\n\n  const personsFiltered = (newFilter === '')\n  ? persons\n  : persons.filter(\n    v => v.name.toLowerCase().includes((newFilter).toLowerCase()) //toLowerCase() is used to handle\n    )  // insensitive case problems by lowercasing both the 'name' property and the user's input\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification popup = {popup}/>\n      <Filter text = {'filter shown with'} value={newFilter} onChange={handleFilterChange}/>\n\n      <h2>add a new</h2>\n      <PersonsForm\n      onSubmit = {addPerson}\n      valueName = {newName} onChangeName = {handleNameChange}\n      valueNumber = {newNumber} onChangeNumber={handleNumberChange}/>\n\n      <h2>Numbers</h2>\n      <Persons array = {personsFiltered} onClick={deletePerson}/>\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}