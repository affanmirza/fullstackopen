(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){},40:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(15),u=t.n(r),o=(t(20),t(6)),i=t(3),s=t(4),d=t.n(s),b="/api/persons",l={getAll:function(){return d.a.get(b).then((function(e){return e.data}))},create:function(e){return d.a.post(b,e).then((function(e){return e.data}))},update:function(e,n){return d.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},erase:function(e){return d.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))}},j=t(0),f=function(e){return Object(j.jsxs)("form",{children:[e.text," ",Object(j.jsx)("input",{value:e.value,onChange:e.onChange})]})},m=function(e){var n=e.popup;return null!==n?Object(j.jsx)("div",{className:n.status,children:n.message}):Object(j.jsx)("div",{})},h=function(e){return Object(j.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{value:e.valueName,onChange:e.onChangeName})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{value:e.valueNumber,onChange:e.onChangeNumber})]}),Object(j.jsxs)("div",{children:[" ",Object(j.jsx)("button",{type:"submit",children:"add"})," "]})]})},O=function(e){return Object(j.jsxs)("div",{children:[e.name," ",e.number,Object(j.jsx)("button",{onClick:e.onClick,children:"delete"})]})},v=function(e){var n=e.array,t=e.onClick;return Object(j.jsx)("div",{children:n.map((function(e){return Object(j.jsx)(O,{name:e.name,number:e.number,onClick:function(){return t(e.id)}},e.id)}))})},p=(t(40),function(){var e=Object(c.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),u=Object(i.a)(r,2),s=u[0],d=u[1],b=Object(c.useState)(""),O=Object(i.a)(b,2),p=O[0],x=O[1],g=Object(c.useState)(""),C=Object(i.a)(g,2),w=C[0],k=C[1],N=Object(c.useState)(null),S=Object(i.a)(N,2),y=S[0],L=S[1];Object(c.useEffect)((function(){l.getAll().then((function(e){a(e)}))}),[]);var A=""===w?t:t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(m,{popup:y}),Object(j.jsx)(f,{text:"filter shown with",value:w,onChange:function(e){return k(e.target.value)}}),Object(j.jsx)("h2",{children:"add a new"}),Object(j.jsx)(h,{onSubmit:function(e){if(e.preventDefault(),""===s||""===p)alert("Name or number cannot be blank");else{var n=t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()}));if(n){if(window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one?"))){var c=Object(o.a)(Object(o.a)({},n),{},{number:p});l.update(n.id,c).then((function(e){a(t.map((function(t){return t.id!==n.id?t:e}))),L({message:"Updated ".concat(n.name),status:"success"}),setTimeout((function(){L(null)}),3e3),d(""),x("")})).catch((function(e){L({message:"Information of ".concat(n.name," has already been removed from the server "),status:"error"}),setTimeout((function(){L(null)}),3e3),a(t.filter((function(e){return e.id!==n.id}))),d(""),x("")}))}}else{var r={name:s,number:p};l.create(r).then((function(e){a(t.concat(e)),L({message:"Added ".concat(e.name),status:"success"}),setTimeout((function(){L(null)}),3e3),d(""),x("")}))}}},valueName:s,onChangeName:function(e){return d(e.target.value)},valueNumber:p,onChangeNumber:function(e){return x(e.target.value)}}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(v,{array:A,onClick:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("delete ".concat(n.name," ?"))&&l.erase(e).then((function(){a(t.filter((function(e){return e.id!==n.id})))}))}})]})});u.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(p,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.3ce07fc8.chunk.js.map